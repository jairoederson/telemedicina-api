(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{1053:function(e,t){},1070:function(e,t,n){e.exports=n.p+"818b400825be1903ccb98ab5db52cb8f.mp3"},1112:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(16),i=n.n(o),c=n(131),l=n(455),u=n(474),s=n(1097),m=n(1098),d=n(543),p=n.n(d),f=n(1095),b=n(1111),v=n(1096),h=n(745),g=n.n(h),y=n(899),E=n.n(y),O=n(901),j=n.n(O),w=n(475),k=n(95),S=n(894),C=n.n(S),R=n(895),x=n.n(R),A=Object(l.a)((function(e){return{root:{margin:"8px 8px 8px 24px",position:"relative"},left:{display:"inline-block",width:260},author:{color:"white",fontWeight:"bold",wordWrap:"break-word",marginRight:6},body:{color:"rgba(255, 255, 255, 0.7)",wordWrap:"break-word"},right:{position:"absolute",top:0,right:0,color:"rgba(255, 255, 255, 0.26)",fontSize:13},links:{color:k.a[700]}}})),N=function(e){var t=e.message,n=A();return r.a.createElement("div",{className:n.root},r.a.createElement("div",{className:n.left},r.a.createElement(w.a,{component:"span",className:n.author,display:"inline"},t.author),r.a.createElement(w.a,{component:"span",className:n.body,dangerouslySetInnerHTML:{__html:x()(t.body,{attributes:[{name:"target",value:"_blank"},{name:"class",value:n.links}],ips:!1})},display:"inline"})),r.a.createElement(w.a,{component:"div",className:n.right},C()(t.timestamp,"h:MM TT")))},T=n(14);function q(){return(q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function P(e,t,n,a,r,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(a,r)}function I(e){return function(e){if(Array.isArray(e))return F(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||_(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(a=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==c.return||c.return()}finally{if(r)throw o}}return n}(e,t)||_(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){if(e){if("string"==typeof e)return F(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?F(e,t):void 0}}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var D=Object(l.a)((function(e){return{root:{height:"100%",position:"absolute",top:0,left:0,bottom:0,width:e.leftPane.width},container:{height:"100%"},iconButton:{padding:e.spacing(1)},content:{overflow:"auto"},form:{padding:"16px 0"}}})),L=void 0,W=function(e){var t=e.from,n=e.roomName,o=e.token,i=e.updateOpenChat,c=e.myRef,l=D(),s=M(Object(a.useState)(""),2),m=s[0],d=s[1],p=M(Object(a.useState)([]),2),h=p[0],y=p[1];Object(a.useEffect)((function(){var e=function(e){y((function(t){return[].concat(I(t),[e])}))};return function(){var a,r=(a=regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,g.a.create(o);case 2:return r=a.sent,a.next=5,r.getSubscribedChannels();case 5:return a.prev=5,a.next=8,r.getChannelByUniqueName(n);case 8:L=a.sent,a.next=23;break;case 11:return a.prev=11,a.t0=a.catch(5),a.prev=13,a.next=16,r.createChannel({uniqueName:n,type:"private",friendlyName:n});case 16:L=a.sent,a.next=23;break;case 19:a.prev=19,a.t1=a.catch(13),console.log("Channel could not be created:"),console.log(a.t1.message);case 23:if(L.on("memberJoined",(function(){console.log("chat participant joined")})),a.prev=24,"joined"==L.state.status){a.next=29;break}return a.next=28,L.join();case 28:a.sent;case 29:a.next=34;break;case 31:a.prev=31,a.t2=a.catch(24),console.error(a.t2.message);case 34:console.log('Joined channel "'.concat(n,'" as ').concat(t.name," ").concat(t.last_name)),L.on("messageAdded",e),L.on("memberLeft",(function(){console.log("chat participant left")}));case 37:case"end":return a.stop()}}),a,null,[[5,11],[13,19],[24,31]])})),function(){var e=this,t=arguments;return new Promise((function(n,r){var o=a.apply(e,t);function i(e){P(o,n,r,i,c,"next",e)}function c(e){P(o,n,r,i,c,"throw",e)}i(void 0)}))});return function(){return r.apply(this,arguments)}}()(),function(){void 0!==L&&(L.leave(),L.removeListener("messageAdded",e))}}),[]);return r.a.createElement("div",{className:l.root,ref:c},r.a.createElement(f.a,{square:!0,className:l.container},r.a.createElement(u.a,{container:!0,direction:"column",justify:"space-between",className:l.root},r.a.createElement(u.a,{item:!0,xs:!0,className:l.content},h.map((function(e,t){return r.a.createElement(N,{key:t,message:e})}))),r.a.createElement(u.a,{item:!0},r.a.createElement(u.a,{container:!0,alignItems:"center",component:"form",onSubmit:function(e){e.preventDefault(),void 0!==L?(L.sendMessage(m),d("")):console.log("The Chat Service is not configured. Please check your .env file.")},className:l.form},r.a.createElement(u.a,{item:!0},r.a.createElement(v.a,{className:l.iconButton,onClick:function(){return i(!1)}},r.a.createElement(E.a,null))),r.a.createElement(u.a,{item:!0,xs:!0},r.a.createElement(b.a,{type:"text",placeholder:"Send a message to everyone on the call",fullWidth:!0,value:m,onChange:function(e){return d(e.target.value)}})),r.a.createElement(u.a,{item:!0},r.a.createElement(v.a,{type:"submit",className:l.iconButton,disabled:!m.length},r.a.createElement(j.a,null))))))))};W.propTypes={token:i.a.string.isRequired,roomName:i.a.string.isRequired,from:i.a.shape({name:i.a.string.isRequired,last_name:i.a.string.isRequired}).isRequired};var B={updateOpenChat:T.o},U=Object(c.b)((function(e){var t=e.app;return{token:t.token,roomName:t.roomName,from:t.from}}),B)(W),z=Object(a.forwardRef)((function(e,t){return r.a.createElement(U,q({},e,{myRef:t}))})),J=n(689),$=n.n(J),H=Object(l.a)((function(e){return{root:{position:"absolute",left:0,bottom:"25vh",backgroundColor:e.palette.grey[900]},button:{borderRadius:0}}})),G=function(e){var t=e.isOpenChat,n=e.updateOpenChat,a=H();return r.a.createElement(s.a,{in:!t},r.a.createElement("div",{className:a.root},r.a.createElement(v.a,{className:a.button,onClick:function(){return n(!t)}},r.a.createElement($.a,null))))};G.propTypes={isOpenChat:i.a.bool.isRequired,updateOpenChat:i.a.func.isRequired};var V={updateOpenChat:T.o},K=Object(c.b)((function(e){return{isOpenChat:e.app.isOpenChat}}),V)(G);var Q=Object(l.a)((function(e){return{root:{position:"relative",zIndex:1},opened:{flexGrow:0,maxWidth:e.leftPane.width,flexBasis:e.leftPane.width}}})),X=function(e){var t,n,a,o=e.isOpenChat,i=Q();return r.a.createElement(u.a,{item:!0,className:p()(i.root,(t={},n=i.opened,a=o,n in t?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,t))},r.a.createElement(m.a,{direction:"right",in:o},r.a.createElement(z,null)),r.a.createElement(s.a,{in:!1},r.a.createElement(K,null)))};X.propTypes={isOpenChat:i.a.bool.isRequired};var Y=Object(c.b)((function(e){return{isOpenChat:e.app.isOpenChat}}))(X),Z=n(598),ee=n.n(Z),te=n(1029),ne=n.n(te),ae=function(){var e;e="https://telemedicina.today/web/socket";var t=ne()(e);return t.on("connect",(function(){console.log("reconectando socketio client...")})),t}(),re=n(42),oe=n(44),ie=n(133),ce=function(e,t){e.forEach((function(e){t.appendChild(e.attach())}))},le=function(e){!function(e){e.forEach((function(e){e.detach().forEach((function(e){e.remove()}))}))}(Array.from(e.tracks.values()))};function ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(n),!0).forEach((function(t){me(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ue(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function me(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function de(e,t,n,a,r,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(a,r)}var pe=Object(l.a)((function(e){return{localMedia:{position:"absolute",top:0,bottom:0,width:"100%",height:"100%",overflow:"hidden","& video":{minWidth:"100%",minHeight:"100%",width:"auto",height:"auto",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-50%)"}},remoteMedia:{display:"flex",justifyContent:"flex-end",position:"absolute",width:"auto",height:"145px",right:"5px",left:"5px",bottom:"10px","& video":{margin:"0 5px",width:"240px",height:"100%"}}}})),fe=function(e){var t=e.tracksMedia,n=e.token,o=e.roomName,i=e.isEnabledMedia,c=e.updateAppStatus,l=e.updateIsRinging,u=e.history,s=pe(),m=Object(a.useRef)(null),d=Object(a.useRef)(null),p=null,f=null;return Object(a.useEffect)((function(){var e=function(){c(ie.b),l(!1),u.push("/unanswered")};return function(){var a,r=(a=regeneratorRuntime.mark((function a(){var r,s;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=[],t.video&&r.push(t.video),t.audio&&r.push(t.audio),i&&ce(r,d.current),s={name:o},i&&(s=se(se({},s),{},{video:!0,audio:!0,tracks:r})),a.prev=6,a.next=9,ee.a.connect(n,s);case 9:f=a.sent,p=setTimeout(e,6e4),console.log("esperando participante"),f.on("participantConnected",(function(e){console.log("Joining: '".concat(e.identity,"'"))})),f.on("trackSubscribed",(function(e,t){console.log("participante subscrito"),l(!1),c(null),clearInterval(p),ce([e],m.current)})),f.on("trackUnsubscribed",(function(e,t){console.log("".concat(t.identity," removed track: ").concat(e.kind))})),f.on("participantDisconnected",(function(e){console.log("Participant '".concat(e.identity,"' left the room")),u.push("/completed")})),f.on("disconnected",(function(){console.log("Video Participant Left"),le(f.localParticipant),f.participants.forEach(le)})),a.next=22;break;case 19:a.prev=19,a.t0=a.catch(6),console.error("Could not connect to Twilio: ".concat(a.t0.message));case 22:case"end":return a.stop()}}),a,null,[[6,19]])})),function(){var e=this,t=arguments;return new Promise((function(n,r){var o=a.apply(e,t);function i(e){de(o,n,r,i,c,"next",e)}function c(e){de(o,n,r,i,c,"throw",e)}i(void 0)}))});return function(){return r.apply(this,arguments)}}()(),function(){f&&f.disconnect()}}),[]),r.a.createElement("div",null,r.a.createElement("div",{className:s.localMedia,ref:m}),r.a.createElement("div",{className:s.remoteMedia,ref:d}))};fe.propTypes={token:i.a.string.isRequired,roomName:i.a.string.isRequired,isEnabledMedia:i.a.bool.isRequired,tracksMedia:i.a.shape({video:i.a.object.isRequired,audio:i.a.object.isRequired}).isRequired,updateAppStatus:i.a.func.isRequired};var be={updateAppStatus:T.m,updateIsRinging:T.n},ve=Object(re.d)(oe.d,Object(c.b)((function(e){var t=e.app,n=e.media;return{token:t.token,roomName:t.roomName,isEnabledMedia:n.isEnabled,tracksMedia:n.tracks}}),be))(fe),he=n(88);function ge(e,t,n,a,r,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(a,r)}var ye=function(e){var t=e.tracks,n=e.from,o=e.to,i=e.roomName,c=(e.isEnabledMedia,e.updateIsEnabledMedia),l=e.updateTracksMedia,u=e.updateIsRinging;return Object(a.useEffect)((function(){(function(){var e,t=(e=regeneratorRuntime.mark((function e(){var t,a,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),n.type_user==ie.d?ae.connected&&(t={room_twilio:i,patient_id:n.user_id,patient_name:n.name,patient_image:n.img_profile,patient_symptoms:n.additionals.symptoms,patient_gender:n.genero,patient_location:n.city,patient_age:n.years_old,title:"Llamada entrante",body:"Nueva llamada entrante",patient_twilio_id:n.roomname,doctor_twilio_id:o.roomname},ae.emit("ringing",t)):n.type_user==ie.c&&ae.on("connect",(function(){ae.emit("answered",i)})),e.prev=2,e.next=5,ee.a.createLocalTracks();case 5:a=e.sent,r={audio:null,video:null},a.forEach((function(e,t){r[e.kind]=e})),l(r),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),c(!1),console.error("Unable to access local media: "+e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[2,11]])})),function(){var t=this,n=arguments;return new Promise((function(a,r){var o=e.apply(t,n);function i(e){ge(o,a,r,i,c,"next",e)}function c(e){ge(o,a,r,i,c,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}})()()}),[]),t.audio&&t.video?r.a.createElement(ve,null):null};ye.propTypes={updateIsRinging:i.a.func.isRequired,updateIsEnabledMedia:i.a.func.isRequired,updateTracksMedia:i.a.func.isRequired,tracks:i.a.shape({audio:i.a.object,video:i.a.object}).isRequired};var Ee={updateIsRinging:T.n,updateIsEnabledMedia:he.e,updateTracksMedia:he.f},Oe=Object(c.b)((function(e){var t=e.app,n=e.media;return{from:t.from,to:t.to,roomName:t.roomName,tracks:n.tracks}}),Ee)(ye),je=n(1116),we=n(1119),ke=n(1056),Se=n.n(ke);function Ce(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(a=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==c.return||c.return()}finally{if(r)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Re(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Re(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Re(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var xe=Object(l.a)((function(e){return{typography:{margin:e.spacing(2)}}})),Ae=function(){var e=xe(),t=Ce(Object(a.useState)(null),2),n=t[0],o=t[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{"aria-owns":n?"info-popper":void 0,"aria-haspopup":"true","aria-label":"Symtoms",onClick:function(e){o(e.currentTarget)}},r.a.createElement(Se.a,null)),r.a.createElement(we.a,{id:"info-popper",open:Boolean(n),anchorEl:n,anchorOrigin:{vertical:"center",horizontal:"left"},transformOrigin:{vertical:"center",horizontal:"right"},onClose:function(e){o(null)}},r.a.createElement(w.a,{className:e.typography},"Symtoms: Dolor de cabeza")))},Ne=n(1074),Te=n(1105),qe=n(1118),Pe=n(1104),Ie=n(1057),Me=n.n(Ie),_e=n(1060),Fe=n.n(_e),De=n(1061),Le=n.n(De),We=n(1062),Be=n.n(We),Ue=n(1063),ze=n.n(Ue),Je=n(1064),$e=n.n(Je),He=n(1065),Ge=n.n(He),Ve=n(1115),Ke=n(1103),Qe=n(1102),Xe=n(1101),Ye=n(1100),Ze=n(1099),et=n(38),tt=n(1059),nt=n.n(tt);function at(){return(at=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var rt=Object(a.forwardRef)((function(e,t){return r.a.createElement(m.a,at({direction:"up",ref:t},e))})),ot=Object(et.a)((function(e){return{root:{backgroundColor:nt.a[500],padding:e.spacing(2),"& h6":{color:"white",fontWeight:300}}}}))(Ze.a),it=Object(et.a)((function(e){return{root:{padding:e.spacing(2)}}}))(Ye.a),ct=Object(et.a)((function(e){return{root:{borderTop:"1px solid ".concat(e.palette.divider),margin:0,padding:e.spacing()}}}))(Xe.a),lt=function(e){var t=e.isOpenFeedback,n=e.updateOpenFeedback;return r.a.createElement(Ve.a,{open:t,fullWidth:!0,maxWidth:"xs",TransitionComponent:rt,PaperProps:{square:!0},keepMounted:!0},r.a.createElement(ot,null,"Send feedback"),r.a.createElement(it,null,r.a.createElement(b.a,{fullWidth:!0,autoFocus:!0,multiline:!0,InputProps:{disableUnderline:!0},placeholder:"Describe your issue or share your ideas",rows:6}),r.a.createElement(w.a,{color:"textSecondary",variant:"caption"},"We will use the information you give us to help address technical issues and to improve out services, subject to our"," ",r.a.createElement(Qe.a,{href:"#"},"Privacy Policy")," and"," ",r.a.createElement(Qe.a,{href:"#"},"Terms of Service"),".")),r.a.createElement(ct,null,r.a.createElement(Ke.a,{onClick:function(){return n(!1)}},"Cancel"),r.a.createElement(Ke.a,{color:"secondary"},"Send")))};lt.propTypes={isOpenFeedback:i.a.bool.isRequired,updateOpenFeedback:i.a.func.isRequired};var ut={updateOpenFeedback:T.p},st=Object(c.b)((function(e){return{isOpenFeedback:e.app.isOpenFeedback}}),ut)(lt);function mt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(a=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==c.return||c.return()}finally{if(r)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return dt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var pt=function(e){var t=e.updateOpenChat,n=e.updateOpenFeedback,o=Me()(document.body),i=mt(Object(a.useState)(null),2),c=i[0],l=i[1],u=mt(Object(a.useState)(null),2),s=u[0],m=u[1],d=function(){l(null)},p=function(e){return function(t){e(!0),d()}};return Object(a.useEffect)((function(){var e=function(){m(null)},t=function(){m(o.target())};return o.on("release",e),o.on("attain",t),function(){o.off("release",e),o.off("attain",t)}}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{"aria-owns":c?"more-menu":void 0,"aria-label":"Settings",onClick:function(e){l(e.currentTarget)}},r.a.createElement(Fe.a,null)),r.a.createElement(Ne.a,{id:"more-menu",anchorEl:c,open:Boolean(c),onClose:d,transitionDuration:0,disableAutoFocusItem:!0},r.a.createElement(qe.a,{onClick:d},r.a.createElement(Pe.a,null,r.a.createElement(Le.a,null)),r.a.createElement(w.a,{variant:"inherit"},"Share screen")),Object(Ie.available)()?r.a.createElement(qe.a,{onClick:function(e){null==s?o.request():o.release(),d()}},r.a.createElement(Pe.a,null,null==s?r.a.createElement(Be.a,null):r.a.createElement(ze.a,null)),r.a.createElement(w.a,{variant:"inherit"},null==s?"Full screen":"Exit Fullscreen")):null,r.a.createElement(Te.a,null),r.a.createElement(qe.a,{onClick:p(t)},r.a.createElement(Pe.a,null,r.a.createElement($.a,null)),r.a.createElement(w.a,{variant:"inherit"},"Chat")),r.a.createElement(qe.a,{onClick:d},r.a.createElement(Pe.a,null,r.a.createElement($e.a,null)),r.a.createElement(w.a,{variant:"inherit"},"Help")),r.a.createElement(qe.a,{onClick:p(n)},r.a.createElement(Pe.a,null,r.a.createElement(Ge.a,null)),r.a.createElement(w.a,{variant:"inherit"},"Feedback"))),r.a.createElement(st,null))};pt.propTypes={updateOpenChat:i.a.func.isRequired,updateOpenFeedback:i.a.func.isRequired};var ft={updateOpenChat:T.o,updateOpenFeedback:T.p},bt=Object(c.b)(null,ft)(pt),vt=Object(l.a)((function(e){return{root:{position:"relative"},fab:{margin:e.spacing(1)},avatar:{width:60,height:60},layer:{position:"absolute",top:0,right:0,bottom:0,left:0},notification:{},menu:{}}})),ht=function(e){var t=e.to,n=e.status,a=vt();switch(n){case ie.a:return r.a.createElement(u.a,{container:!0,alignItems:"center",justify:"center"},r.a.createElement(u.a,{item:!0},r.a.createElement(je.a,{alt:"".concat(t.name," ").concat(t.last_name),src:t.img_profile,className:p()(a.avatar,a.fab)})),r.a.createElement(u.a,{item:!0,className:a.fab},r.a.createElement(w.a,null,"doctor"==t.type_user?"Llamando a Dr. ".concat(t.name):"Conectandose con ".concat(t.name))));case ie.b:return r.a.createElement(u.a,{container:!0,alignItems:"center",justify:"center"},r.a.createElement(u.a,{item:!0,className:a.fab},r.a.createElement(w.a,null,"".concat(t.name," no estÃ¡ disponible"))));default:return null}},gt=Object(c.b)((function(e){var t=e.app;return{appStatus:t.appStatus,to:t.to}}))((function(e){var t=e.appStatus,n=e.to,a=vt();return r.a.createElement("div",{className:a.root},r.a.createElement("div",{className:a.layer},r.a.createElement(ht,{status:t,to:n})),r.a.createElement("div",{className:a.layer},r.a.createElement(u.a,{container:!0,justify:"flex-end",alignItems:"center"},r.a.createElement(Ae,null),r.a.createElement(bt,null))))})),yt=n(1106),Et=n(1066),Ot=n.n(Et),jt=n(1067),wt=n.n(jt),kt=n(614),St=n.n(kt),Ct=n(1068),Rt=n.n(Ct),xt=n(1069),At=n.n(xt);function Nt(e,t,n,a,r,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(a,r)}function Tt(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var o=e.apply(t,n);function i(e){Nt(o,a,r,i,c,"next",e)}function c(e){Nt(o,a,r,i,c,"throw",e)}i(void 0)}))}}function qt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(a=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==c.return||c.return()}finally{if(r)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Pt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Pt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var It=Object(l.a)((function(e){return{fab:{margin:e.spacing(1)}}})),Mt=function(e){var t=e.tracks,n=e.updateDismissedAlert,o=(e.history,It()),i=qt(Object(a.useState)(!0),2),c=i[0],l=i[1],s=qt(Object(a.useState)(!0),2),m=s[0],d=s[1];return r.a.createElement(u.a,{container:!0,justify:"center"},r.a.createElement(yt.a,{className:o.fab,onClick:function(e){if(null===t.audio)n(!0);else{if(t.audio.enable(!t.audio.isEnabled),c)t.audio.stop();else(function(){var e=Tt(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee.a.createLocalTracks({audio:!0});case 2:t=e.sent,console.log(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()();l(!c)}}},c?r.a.createElement(Ot.a,null):r.a.createElement(wt.a,null)),r.a.createElement(yt.a,{color:"secondary",className:o.fab,onClick:function(){console.log("Cerrar ventana."),window.close(),window.close()}},r.a.createElement(St.a,null)),r.a.createElement(yt.a,{className:o.fab,onClick:function(e){if(null===t.video)n(!0);else{if(m)t.video.stop();else(function(){var e=Tt(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee.a.createLocalTracks({video:!0});case 2:t=e.sent,console.log(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()();d(!m)}}},m?r.a.createElement(Rt.a,null):r.a.createElement(At.a,null)))};Mt.propTypes={tracks:i.a.object.isRequired,updateDismissedAlert:i.a.func.isRequired};var _t={updateDismissedAlert:he.d},Ft=Object(re.d)(oe.d,Object(c.b)((function(e){return{tracks:e.media.tracks}}),_t))(Mt),Dt=Object(l.a)((function(e){return{root:{position:"absolute",top:0,right:0,bottom:0,left:0,paddingTop:e.spacing(3),paddingRight:e.spacing(2),paddingBottom:e.spacing(3),paddingLeft:e.spacing(2)}}})),Lt=function(e){e.tracks;var t=Dt();return r.a.createElement(u.a,{container:!0,direction:"column",justify:"space-between",className:t.root},r.a.createElement(u.a,{item:!0},r.a.createElement(gt,null)),r.a.createElement(u.a,{item:!0},r.a.createElement(Ft,null)))};Lt.propTypes={tracks:i.a.object.isRequired};var Wt=Object(c.b)((function(e){return{tracks:e.media.tracks}}))(Lt),Bt=n(1070),Ut=new Audio(n.n(Bt).a);Ut.loop=!0;var zt=Object(c.b)((function(e){return{isRinging:e.app.isRinging}}))((function(e){return e.isRinging?Ut.play():(Ut.pause(),Ut.currentTime=0),null})),Jt=Object(l.a)((function(e){return{root:{position:"relative",height:"100%"}}})),$t=function(){var e=Jt();return r.a.createElement(u.a,{item:!0,xs:!0},r.a.createElement("div",{className:e.root},r.a.createElement(Oe,null),r.a.createElement(Wt,null),r.a.createElement(zt,null)))},Ht=n(1107),Gt=n(453),Vt=n(1071),Kt=n.n(Vt),Qt=Object(Gt.a)((function(e){return{closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}}))((function(e){var t=e.children,n=e.classes,a=e.onClose;return r.a.createElement(Ze.a,{disableTypography:!0,className:n.root},r.a.createElement(w.a,{variant:"h6"},t),a?r.a.createElement(v.a,{"aria-label":"Close",className:n.closeButton,onClick:a},r.a.createElement(Kt.a,null)):null)})),Xt=function(e){var t=e.dismissedAlert,n=e.updateDismissedAlert;return r.a.createElement(Ve.a,{open:t,keepMounted:!0,"aria-labelledby":"alert-dialog-enabled_media-title","aria-describedby":"alert-dialog-enabled_media-description"},r.a.createElement(Qt,{onClose:function(){return n(!1)},id:"alert-dialog-enabled_media-title"},"Camera and microphone are blocked"),r.a.createElement(Ye.a,null,r.a.createElement(Ht.a,{id:"alert-dialog-enabled_media-description"},"Allow [APP] to access your camera and microphone by clicking [icon] in you URL bar.")),r.a.createElement(Xe.a,null,r.a.createElement(Ke.a,{color:"secondary",onClick:function(){return n(!1)}},"Dismiss")))};Xt.propTypes={dismissedAlert:i.a.bool.isRequired,updateDismissedAlert:i.a.func.isRequired};var Yt={updateDismissedAlert:he.d},Zt=Object(c.b)((function(e){return{dismissedAlert:e.media.dismissedAlert}}),Yt)(Xt),en=Object(l.a)((function(e){return{root:{width:"100%",height:"100%"}}})),tn=Object(c.b)((function(e){return{isEnabledMedia:e.media.isEnabled}}))((function(e){var t=e.isEnabledMedia,n=en();return r.a.createElement(r.a.Fragment,null,r.a.createElement(u.a,{container:!0,className:n.root},r.a.createElement(Y,null),r.a.createElement($t,null)),t?null:r.a.createElement(Zt,null))})),nn=n(181),an=n(737),rn=Object(l.a)((function(e){return{root:{width:"100vw",height:"100%",position:"relative"}}})),on=function(e){var t=e.loading,n=e.error,o=e.updateAppStatus,i=rn();return Object(a.useEffect)((function(){o(ie.a)}),[]),r.a.createElement("div",{className:i.root},t?r.a.createElement(nn.a,null):n?r.a.createElement(an.default,null):r.a.createElement(tn,null))};on.propTypes={loading:i.a.number.isRequired};var cn={updateAppStatus:T.m};t.default=Object(c.b)((function(e){var t=e.app;return{loading:t.loading,error:t.error}}),cn)(on)},737:function(e,t,n){"use strict";n.r(t);var a=n(474),r=n(475),o=n(0),i=n.n(o),c=n(16),l=n.n(c),u=n(131),s=n(1072),m=Object(s.a)((function(e){return{root:{height:"100%"}}})),d=function(e){var t=e.error,n=m();return i.a.createElement(a.a,{container:!0,justify:"center",alignItems:"center",className:n.root},i.a.createElement(a.a,{item:!0},i.a.createElement(r.a,null,t)))};d.propTypes={error:l.a.string.isRequired};t.default=Object(u.b)((function(e){return{error:e.app.error}}))(d)},846:function(e,t){},876:function(e,t){}}]);